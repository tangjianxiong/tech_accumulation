# 文件输入输出

文件是当今计算机系统不可或缺的一部分。文件用于存储程序、文档、数据、书信、表格、图形、照片、视频和许多其他种类的信息。

# 文件概述

## 什么是文件
文件通常是在磁盘或固态硬盘上的一段已经命名的存储区。对操作系统而言，大型文件会被分开存储，或者包含一些有用的信息，方便操作系统确定文件的种类。对程序员而言，他们关心的是C语言如何处理文件。


C语言将文件看作是一系列连续的字节，每个字节都能被单独读取。这与Unix中的文件结构相对应，C语言提供两种文件模式：文本模式和二进制模式。

## 文本模式和二进制模式

首先要区分文本内容和二进制内容、文本文件格式和二进制文件格式，以及文件的文本模式和二进制模式。


所有的文件内容都是以二进制形式进行存储。但是，如果文件最初使用二进制编码的字符表示文本（如ASCⅡ或Unicode），表示文本，该文件就是**文本文件**，其中包含文本内容。


如果文件中的二进制值代表机器语言代码或数值数据或图片或音乐编码，该文件就是二进制文件，其中包含二进制内容。

## 文件IO的级别
除了选择文件的模式，大多数情况下，还可以选择IO的级别。底层IO使用操作系统提供的基本IO服务，标准高级IO使用C库的标准宝和stdio头文件定义。


# 标准IO
与底层IO相比，标准IO除了可移植外还有两个好处。
+ 标准IO有许多专门的函数简化了处理不同IO的问题
+ 输入和输出都是缓冲的

## fopen()
```c
FILE* fopen(,,)
```
+ 参数1：待打开文件的名称
+ 参数2：指定待打开文件的模式，读写等等

## getc()和putc()
getc和putc函数与getchar和putchar函数类似，所不同的是，要告诉getc和putc函数使用哪一个文件。
```
ch=getc(fp); //从fp指定文件获取一个字符
ch=getchar(); //从标准输入中获取一个字符
```

## fclose函数

```
if(fclose(fp)!=0)
    printf("close failure\n");
```
fclose函数关闭fp指定的文件，必要时刷新缓冲区。对于较正式的程序，应该检查是否成功关闭文件，成功则返回0，失败返回EOF。

## fprintf()和fscanf()
文件IO函数fprintf和fscanf函数的工作方式与printf和scanf类似，前两者需要指定待处理的文件。

## fgets()和fputs()函数

```c
 char *fgets(char *str, int n, FILE *stream) 
```
fgets()函数从指定的流 stream 读取一行，并把它存储在 str 所指向的字符串内。当读取 (n-1) 个字符时，或者读取到换行符时，或者到达文件末尾时，它会停止，具体视情况而定。


```c
int fputs(const char *str, FILE *stream)
```
fputs把字符串写入到指定的流 stream 中，但不包括空字符

